[gd_scene load_steps=24 format=3 uid="uid://bym67mem2gybc"]

[ext_resource type="Script" path="res://levels/cottage_mid.gd" id="1_1x5ka"]
[ext_resource type="AudioStream" uid="uid://bxesjrdygf1aq" path="res://assets/sounds/ambience_house_1.mp3" id="2_ygwhj"]
[ext_resource type="AudioStream" uid="uid://7w6tftu8qoyi" path="res://assets/sounds/sfx_walk_house_2.mp3" id="3_t5w0n"]
[ext_resource type="AudioStream" uid="uid://cutw4ockgcf2r" path="res://assets/sounds/sfx_monster.mp3" id="4_bo2jh"]
[ext_resource type="PackedScene" uid="uid://dkmlxej3ra7jm" path="res://core/components/props/CottageLights.tscn" id="4_ni5km"]
[ext_resource type="PackedScene" uid="uid://cp1r7lxmw65ux" path="res://core/components/props/CottageLightingEnvironment.tscn" id="5_k4nph"]
[ext_resource type="TileSet" uid="uid://7guefr8ha4lv" path="res://levels/TileMap.tres" id="6_8l6s7"]
[ext_resource type="PackedScene" uid="uid://dh8vp3rcmjxa8" path="res://core/components/doors/Door.tscn" id="7_qqt0g"]
[ext_resource type="PackedScene" uid="uid://do0n4uabtun0e" path="res://core/components/props/Closeup.tscn" id="8_8o31r"]
[ext_resource type="Texture2D" uid="uid://48ic3n7ms6md" path="res://assets/sprites/environment/padlock.tres" id="9_lnnmv"]
[ext_resource type="FontFile" uid="uid://bwehnpvllpkts" path="res://assets/ui/m5x7.ttf" id="10_lrtlc"]
[ext_resource type="FontFile" uid="uid://gampf8jdembm" path="res://assets/ui/Pixie.ttf" id="11_nfd8s"]
[ext_resource type="PackedScene" uid="uid://d1450fjlney6r" path="res://core/dialogues/Actionable.tscn" id="12_q5ugo"]
[ext_resource type="Resource" uid="uid://gj7fpd5dggmt" path="res://core/dialogues/doors.dialogue" id="13_yv32s"]
[ext_resource type="Texture2D" uid="uid://bghwf8nqggdno" path="res://assets/sprites/character/monster_sighting-sheet.png" id="14_8mncm"]
[ext_resource type="FontFile" uid="uid://cdqwfc7troc3" path="res://assets/ui/m3x6.ttf" id="16_nrqs3"]

[sub_resource type="Animation" id="Animation_c7g2a"]
length = 0.001
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Sighting:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [0]
}

[sub_resource type="Animation" id="Animation_ltyfm"]
resource_name = "blink"
length = 2.0
loop_mode = 1
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Sighting:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 1.7),
"transitions": PackedFloat32Array(1, 1),
"update": 1,
"values": [0, 1]
}
tracks/1/type = "method"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("Sighting")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"values": [{
"args": [],
"method": &"show"
}]
}

[sub_resource type="Animation" id="Animation_xwulk"]
resource_name = "vanish"
length = 1.25
step = 0.05
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Sighting:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.1, 0.2, 0.3, 0.4, 0.5, 0.6, 0.9, 1, 1.1),
"transitions": PackedFloat32Array(1, 1, 1, 1, 1, 1, 1, 1, 1, 1),
"update": 0,
"values": [2, 3, 4, 5, 6, 7, 8, 9, 10, 11]
}
tracks/1/type = "method"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("Sighting")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(1.2),
"transitions": PackedFloat32Array(1),
"values": [{
"args": [],
"method": &"hide"
}]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_0dggo"]
_data = {
"RESET": SubResource("Animation_c7g2a"),
"blink": SubResource("Animation_ltyfm"),
"vanish": SubResource("Animation_xwulk")
}

[sub_resource type="CanvasTexture" id="CanvasTexture_d3wfa"]

[sub_resource type="RectangleShape2D" id="RectangleShape2D_absha"]
size = Vector2(20, 35)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_ule2o"]

[node name="CottageMiddle" type="Node2D" node_paths=PackedStringArray("ap_monster_sighting", "sighting_trigger_l", "sighting_trigger_r", "light_to_flicker", "scene_name_label", "spawn_point", "camera_bounds_tl", "camer_bounds_br", "diag_caller", "anim_player", "walking_sound")]
script = ExtResource("1_1x5ka")
passcode = 125906
ap_monster_sighting = NodePath("AnimationPlayer")
sighting_trigger_l = NodePath("EventTriggers/SightingTriggerL/CollisionShape2D")
sighting_trigger_r = NodePath("EventTriggers/SightingTriggerR/CollisionShape2D")
light_to_flicker = NodePath("Lighting/PointLight2D5")
scene_name = "Hallway"
scene_name_label = NodePath("LabelCanvas/Control/RichTextLabel")
spawn_point = NodePath("Markers/Spawn")
camera_bounds_tl = NodePath("Markers/TL")
camer_bounds_br = NodePath("Markers/BR")
diag_caller = NodePath("DiagCaller")
anim_player = NodePath("AnimationPlayer")
walking_sound = NodePath("AudioStreamPlayer2D")
ambience_mp3 = ExtResource("2_ygwhj")

[node name="AnimationPlayer" type="AnimationPlayer" parent="."]
libraries = {
"": SubResource("AnimationLibrary_0dggo")
}

[node name="AudioStreamPlayer2D" type="AudioStreamPlayer2D" parent="."]
stream = ExtResource("3_t5w0n")
volume_db = -35.0

[node name="SightingAudio" type="AudioStreamPlayer2D" parent="."]
stream = ExtResource("4_bo2jh")

[node name="Lighting" type="Node" parent="."]

[node name="DirectionalLight2D" type="DirectionalLight2D" parent="Lighting"]
color = Color(0.0117647, 0.0117647, 0.0117647, 1)
energy = 0.97
blend_mode = 2

[node name="PointLight2D3" parent="Lighting" instance=ExtResource("4_ni5km")]
position = Vector2(56, 81)
lerp_weight = 0.01

[node name="PointLight2D4" parent="Lighting" instance=ExtResource("4_ni5km")]
position = Vector2(169, 81)
lerp_weight = 0.01

[node name="PointLight2D5" parent="Lighting" instance=ExtResource("4_ni5km")]
position = Vector2(282, 81)
lowest_light_strength = 1.0
highest_light_strength = 2.0

[node name="WorldEnvironment" parent="Lighting" instance=ExtResource("5_k4nph")]

[node name="CanvasLayer" type="CanvasLayer" parent="."]
layer = -10

[node name="Sprite2D" type="Sprite2D" parent="CanvasLayer"]
modulate = Color(0.0606387, 0.0617157, 0.0514035, 1)
position = Vector2(178.5, 96.3417)
scale = Vector2(377, 213.317)
texture = SubResource("CanvasTexture_d3wfa")

[node name="Markers" type="Node2D" parent="."]

[node name="Spawn" type="Marker2D" parent="Markers"]
position = Vector2(310, 110)

[node name="TL" type="Marker2D" parent="Markers"]
position = Vector2(0, 39)

[node name="BR" type="Marker2D" parent="Markers"]
position = Vector2(383, 145)

[node name="Platform" type="Node2D" parent="."]
position = Vector2(0, 95)

[node name="TileMap" type="TileMap" parent="Platform"]
tile_set = ExtResource("6_8l6s7")
format = 2
layer_0/name = "Ground"
layer_0/tile_data = PackedInt32Array(22, 589824, 0, -65514, 589824, 0, -131050, 458752, 0, 21, 589824, 0, -65515, 589824, 0, -131051, 458752, 0, 20, 589824, 0, -65516, 589824, 0, -131052, 458752, 0, 19, 589824, 0, -65517, 589824, 0, -131053, 458752, 0, 18, 589824, 0, -65518, 589824, 0, -131054, 458752, 0, 17, 589824, 0, -65519, 589824, 0, -131055, 458752, 0, 16, 589824, 0, -65520, 589824, 0, -131056, 458752, 0, 15, 589824, 0, -65521, 589824, 0, -131057, 458752, 0, 14, 589824, 0, -65522, 589824, 0, -131058, 458752, 0, 13, 589824, 0, -65523, 589824, 0, -131059, 458752, 0, 12, 589824, 0, -65524, 589824, 0, -131060, 458752, 0, 11, 589824, 0, -65525, 589824, 0, -131061, 458752, 0, 10, 589824, 0, -65526, 589824, 0, -131062, 458752, 0, 9, 589824, 0, -65527, 589824, 0, -131063, 458752, 0, 8, 589824, 0, -65528, 589824, 0, -131064, 458752, 0, 7, 589824, 0, -65529, 589824, 0, -131065, 458752, 0, 6, 589824, 0, -65530, 589824, 0, -131066, 458752, 0, 5, 589824, 0, -65531, 589824, 0, -131067, 458752, 0, 4, 589824, 0, -65532, 589824, 0, -131068, 458752, 0, 3, 589824, 0, -65533, 589824, 0, -131069, 458752, 0, 2, 589824, 0, -65534, 589824, 0, -131070, 458752, 0, 1, 589824, 0, -65535, 589824, 0, -131071, 458752, 0, 0, 393216, 1, -65536, 393216, 1, -131072, 131072, 2, 65536, 131072, 3, 65537, 393216, 0, 65538, 393216, 0, 65539, 393216, 0, 65540, 393216, 0, 65541, 393216, 0, 65542, 393216, 0, 65543, 393216, 0, 65544, 393216, 0, 65545, 393216, 0, 65546, 393216, 0, 65547, 393216, 0, 65555, 393216, 0, 65556, 393216, 0, 65557, 393216, 0, 65558, 393216, 0, 65554, 393216, 0, 65553, 393216, 0, 65552, 393216, 0, 65551, 393216, 0, 65550, 393216, 0, 65549, 393216, 0, 65548, 393216, 0, -131049, 196608, 2, -65513, 458752, 1, 23, 458752, 1, 65559, 196608, 3)
layer_1/name = "Objects"
layer_1/tile_data = PackedInt32Array(14, 0, 8, 21, 0, 8, 8, 131072, 8, 2, 0, 8, 17, 393216, 9, 12, 131072, 12, -131069, 262144, 12, -131062, 262144, 12, -131055, 262144, 12, 6, 524288, 11, 65540, 131072, 11, 65542, 262144, 10, 19, 393216, 11, 4, 0, 12, 65548, 131072, 11, 65546, 262144, 11, 10, 524288, 11)

[node name="Doors" type="Node2D" parent="Platform"]

[node name="Door4" parent="Platform/Doors" node_paths=PackedStringArray("spawn_loc") groups=["Doors"] instance=ExtResource("7_qqt0g")]
position = Vector2(233, 1)
leads_to_scene = "res://levels/CottageBedroom2.tscn"
door_number = 4
spawn_loc = NodePath("Spawner")

[node name="Spawner" type="Marker2D" parent="Platform/Doors/Door4"]
position = Vector2(0, 14)

[node name="Door6" parent="Platform/Doors" node_paths=PackedStringArray("spawn_loc") groups=["Doors"] instance=ExtResource("7_qqt0g")]
position = Vector2(344, 0)
leads_to_scene = "res://levels/CottageBedroom4.tscn"
door_number = 6
spawn_loc = NodePath("Spawner")

[node name="Spawner" type="Marker2D" parent="Platform/Doors/Door6"]
position = Vector2(0, 14)

[node name="Door2" parent="Platform/Doors" node_paths=PackedStringArray("spawn_loc") groups=["Doors"] instance=ExtResource("7_qqt0g")]
position = Vector2(40, 0)
leads_to_scene = "res://levels/CottageEntrance.tscn"
door_number = 2
spawn_loc = NodePath("Spawner")

[node name="Spawner" type="Marker2D" parent="Platform/Doors/Door2"]
position = Vector2(0, 14)

[node name="CloseupLock" parent="Platform" node_paths=PackedStringArray("camera", "interact_obj") instance=ExtResource("8_8o31r")]
position = Vector2(136, 3)
camera = NodePath("Camera2D")
interact_obj = NodePath("CanvasLayer")

[node name="Camera2D" type="Camera2D" parent="Platform/CloseupLock"]
visible = false
enabled = false
zoom = Vector2(10, 10)

[node name="CollisionShape2D" type="CollisionShape2D" parent="Platform/CloseupLock"]
position = Vector2(0, 7.5)
shape = SubResource("RectangleShape2D_absha")

[node name="CanvasLayer" type="CanvasLayer" parent="Platform/CloseupLock"]
visible = false

[node name="Control" type="Control" parent="Platform/CloseupLock/CanvasLayer"]
layout_mode = 3
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
offset_bottom = -7.0
grow_horizontal = 2
grow_vertical = 2

[node name="BoxContainer" type="BoxContainer" parent="Platform/CloseupLock/CanvasLayer/Control"]
layout_mode = 1
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
grow_horizontal = 2
grow_vertical = 2
alignment = 1

[node name="Sprite2D" type="Sprite2D" parent="Platform/CloseupLock/CanvasLayer/Control/BoxContainer"]
scale = Vector2(4, 4)
texture = ExtResource("9_lnnmv")

[node name="Label" type="Label" parent="Platform/CloseupLock/CanvasLayer/Control"]
layout_mode = 1
anchors_preset = 7
anchor_left = 0.5
anchor_top = 1.0
anchor_right = 0.5
anchor_bottom = 1.0
offset_left = -119.0
offset_top = -48.0
offset_right = 119.0
offset_bottom = -25.0
grow_horizontal = 2
grow_vertical = 0
theme_override_fonts/font = ExtResource("10_lrtlc")
text = "Looks like this requires a code."
horizontal_alignment = 1
vertical_alignment = 1

[node name="LineEdit" type="LineEdit" parent="Platform/CloseupLock/CanvasLayer/Control"]
layout_mode = 1
anchors_preset = 7
anchor_left = 0.5
anchor_top = 1.0
anchor_right = 0.5
anchor_bottom = 1.0
offset_left = -52.0
offset_top = -22.0
offset_right = 52.0
grow_horizontal = 2
grow_vertical = 0
theme_override_fonts/font = ExtResource("11_nfd8s")
theme_override_font_sizes/font_size = 16
placeholder_text = "xxxxxx"
alignment = 1
max_length = 6

[node name="Sighting" type="Sprite2D" parent="."]
visible = false
position = Vector2(235, 109)
texture = ExtResource("14_8mncm")
hframes = 12

[node name="DiagCaller" parent="." instance=ExtResource("12_q5ugo")]
dialogue_resource = ExtResource("13_yv32s")

[node name="EventTriggers" type="Node2D" parent="."]

[node name="SightingTriggerL" type="Area2D" parent="EventTriggers"]
position = Vector2(187, 114)
collision_layer = 8
collision_mask = 2

[node name="CollisionShape2D" type="CollisionShape2D" parent="EventTriggers/SightingTriggerL"]
position = Vector2(7, 0)
shape = SubResource("RectangleShape2D_ule2o")
disabled = true

[node name="SightingTriggerR" type="Area2D" parent="EventTriggers"]
position = Vector2(278, 114)
collision_layer = 8
collision_mask = 2

[node name="CollisionShape2D" type="CollisionShape2D" parent="EventTriggers/SightingTriggerR"]
shape = SubResource("RectangleShape2D_ule2o")
disabled = true

[node name="LabelCanvas" type="CanvasLayer" parent="."]

[node name="Control" type="Control" parent="LabelCanvas"]
layout_mode = 3
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
mouse_filter = 2

[node name="RichTextLabel" type="RichTextLabel" parent="LabelCanvas/Control"]
clip_contents = false
custom_minimum_size = Vector2(2, 2)
layout_mode = 1
anchors_preset = 3
anchor_left = 1.0
anchor_top = 1.0
anchor_right = 1.0
anchor_bottom = 1.0
offset_left = -10.0
offset_top = -21.0
offset_right = -2.0
offset_bottom = -5.0
grow_horizontal = 0
grow_vertical = 0
theme_override_colors/default_color = Color(1, 1, 1, 0.415686)
theme_override_fonts/normal_font = ExtResource("16_nrqs3")
theme_override_font_sizes/normal_font_size = 16
bbcode_enabled = true
fit_content = true
autowrap_mode = 0

[connection signal="on_closeup" from="Platform/CloseupLock" to="." method="_on_closeup_lock_on_closeup"]
[connection signal="on_closeup_exit" from="Platform/CloseupLock" to="." method="_on_closeup_lock_on_closeup_exit"]
[connection signal="text_changed" from="Platform/CloseupLock/CanvasLayer/Control/LineEdit" to="." method="_on_line_edit_text_changed"]
[connection signal="body_entered" from="EventTriggers/SightingTriggerL" to="." method="_on_sighting_trigger_l_body_entered"]
[connection signal="body_entered" from="EventTriggers/SightingTriggerR" to="." method="_on_sighting_trigger_r_body_entered"]
